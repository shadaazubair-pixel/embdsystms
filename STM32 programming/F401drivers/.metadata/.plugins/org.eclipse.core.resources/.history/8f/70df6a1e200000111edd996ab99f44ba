/*
 * stm32f401re_gpio_driver.h
 *
 *  Created on: Jan 27, 2026
 *      Author: user
 */

#ifndef INC_STM32F401XX_GPIO_DRIVER_H_
#define INC_STM32F401XX_GPIO_DRIVER_H_

#include "stm32f401xx.h"

/*configuration structure for GPIO pin*/
typedef struct{
	uint8_t GPIO_PinNumber;   //pin number
	uint8_t GPIO_PinMode;     //mode: input/output/altin/analog
	uint8_t GPIO_PinSpeed;    // speed: low, med, high, very high
	uint8_t GPIO_PinPupdControl; //pull up/pull down cofiguration
	uint8_t GPIO_PinOPType;       //output type:push pull/open drain
	uint8_t GPIO_PinAltFunMode;    //alternate function
}GPIO_PinConfig_t;



/*handle structure for GPIO pin*/
typedef struct{
	GPIO_RegDef_t *pGPIOx;         //points to GPI port base address
	GPIO_PinConfig_t GPIO_PinConfig;       //pin configuration settings
}GPIO_Handle_t;


#define GPIO_PIN_NO_0           0
#define GPIO_PIN_NO_1           1
#define GPIO_PIN_NO_2           2
#define GPIO_PIN_NO_3           3
#define GPIO_PIN_NO_4           4
#define GPIO_PIN_NO_5           5
#define GPIO_PIN_NO_6           6
#define GPIO_PIN_NO_7           7
#define GPIO_PIN_NO_8           8
#define GPIO_PIN_NO_9           9
#define GPIO_PIN_NO_10           10
#define GPIO_PIN_NO_11          11
#define GPIO_PIN_NO_12          12
#define GPIO_PIN_NO_13          13
#define GPIO_PIN_NO_14          14
#define GPIO_PIN_NO_15          15

/* GPIO modes*/
#define GPIO_MODE_IN            0  //INPUT MODE 00
#define GPOI_MODE_OUT           1  //OUTPUT 01
#define GPIO_MODE_ALT           2  //ALT function mode 10
#define GPIO_MODE_ANALOG        3  // analog mode 11


/*GPIO SPEED*/
#define GPIO_SPEED_LOW          0
#define GPIO_SPEED_MEDIUM       1
#define GPIO_SPEED_HIGH         2
#define GPIO_SPEED_VERY_HIGH    3

/*GPIO PUPD CONTROLS*/
#define GPIO_NOPULLUP_NOPULLDOWN 0
#define GPIO_PULLP               1
#define GPIO_PULLDOWN            2

/*GPIO PIN OUTPUT TYPE*/
#define OUTPUT_PUSHPULL          0
#define OPEN_DRAIN               1


// GPIO_PerClockControl(GPIOA,ENABLE);


/*********************************************************************
 * @fn          - GPIO_PeriClockControl
 *
 * @brief       - Enables or disables peripheral clock for GPIO port(GPIOA, GPIOB,....GPIOH)
 *
 * @param[in]   - pGPIOx: GPIO port base address
 * @param[in]   - EnorDi: ENABLE or DISABLE macros
 *
 * @return      - none
 *
 * @Note        - none
 *********************************************************************/
void GPIO_PeriClockControl(GPIO_RegDef_t *pGPIOx, uint8_t  EnorDi){

	if(EnorDi == ENABLE)
	{
		if(pGPIOx == GPIOA)
		{
			GPIOA_PCLK_EN();
		}
		else if(pGPIOx == GPIOB)
		{
			GPIOB_PCLK_EN();
		}
		else if(pGPIOx == GPIOC)
		{
			GPIOC_PCLK_EN();
		}
		else if(pGPIOx == GPIOD)
		{
			GPIOD_PCLK_EN();
		}
		else if(pGPIOx == GPIOE)
		{
			GPIOE_PCLK_EN();
		}
		else if(pGPIOx == GPIOH)
		{
			GPIOH_PCLK_EN();
		}


	}

	else
	{
		if(pGPIOx == GPIOA )
		{
			GPIOA_PCLK_DI();
		}

		else if(pGPIOx == GPIOB)
		{
			GPIOB_PCLK_DI();
		}
		else if(pGPIOx == GPIOB)
		{
			GPIOB_PCLK_DI();
				}
		else if(pGPIOx == GPIOC)
		{
			GPIOC_PCLK_DI();
		}
		else if(pGPIOx == GPIOD)
		{
			GPIOD_PCLK_DI();
		}
		else if(pGPIOx == GPIOE)
		{
			GPIOE_PCLK_DI();
		}
		else if(pGPIOx == GPIOH)
		{
			GPIOH_PCLK_DI();
		}


	}

}

/*********************************************************************
 * @fn          - GPIO_Init
 *
 * @brief       - this function initializes the given GPIO port
 *
 * @param[in]   - pGPIOHandle : pointer to GPIO handle structure
 * @param[in]   - EnorDi: ENABLE or DISABLE macros
 *
 * @return      - none
 *
 * @Note        - refer macros for gpio configurations
 *********************************************************************/

void GPIO_Init(GPIO_Handle_t*pGPIOHandle){
	//enable peripheral clock
	GPIO_PeriClockControl(pGPIOHndle-->pGPIOx, ENABLE);

}
void GPIO_DeInit(GPIO_RegDef_t *pGPIOx){

}


/*********************************************************************
 * @fn          - GPIO_Readfrominputpin
 *
 * @brief       - this function is used to read value in gpio pin
 *
 * @param[in]   - pGPIOx: points to GPIO_RegDef_t structure
 * @param[in]   - pin number
 *
 * @return      - uint8_t value(value inside that pin either 0 or 1)
 *
 * @Note        - none
 *********************************************************************/
uint8_t GPIO_Readfrominputpin(GPIO_RegDef_t *pGPIOx, uint8_t PinNumber){

	uint8_t value;
	value = (uint8_t)((pGPIOx-->IDR >> PinNumber)&0x00000001);
	return value;

}


/*********************************************************************
 * @fn          - GPIO_Readfrominputport
 *
 * @brief       - this function is used to read value in gpio port
 *
 * @param[in]   - pGPIOx: GPIO port base address

 *
 * @return      - uint16_t
 *
 * @Note        - none
 *********************************************************************/
uint16_t GPIO_Readfrominputport(GPIO_RegDef_t *pGPIOx){
	uint16_t value;
	value= (uint16_t)pGPIOx-->IDR;
	return value;

}

/*********************************************************************
 * @fn          - GPIO_Writetoputputpin
 *
 * @brief       - this function is used to Write value to ouput pin
 *
 * @param[in]   - pGPIOx: GPIO port base address
 * @param[in]   - pin number
 * @param[in]   - value

 *
 * @return      - none
 *
 * @Note        - none
 *********************************************************************/

void GPIO_Writetooutputpin(GPIO_RegDef_t *pGPIOx, uint8_t PinNumber, uint8_t Value){
	if(Value == GPIO_SET_PIN)
	{
		pGPIOx-->ODR|=(1<<PinNumber);  //write 1
	}

	else
	{
		pGPIOx-->ODR&=~(1<<PinNumber);  //write 0

	}
}

/*********************************************************************
 * @fn          - GPIO_Writetoputputport
 *
 * @brief       - this function is used to Write value to ouput port
 *
 * @param[in]   - pGPIOx: GPIO port base address
 *
 * @param[in]   - value

 *
 * @return      - none
 *
 * @Note        - none
 *********************************************************************/

void GPIO_Writetooutputport(GPIO_RegDef_t *pGPIOx, uint8_t Value){
	pGPIOx-->ODR= value;
}



/*********************************************************************
 * @fn          - GPIO_Toggle outputpin
 *
 * @brief       - this function is used to toggle a pin
 *
 * @param[in]   - pGPIOx: GPIO port base address
 * @param[in]   - pin number
 *

 *
 * @return      - none
 *
 * @Note        - none
 *********************************************************************/

void GPIO_Toggleoutputpin(GPIO_RegDef_t *pGPIOx, uint8_t PinNumber){
	pGPIOx-->ODR^=(1<<PinNumber);
}




#endif /* INC_STM32F401XX_GPIO_DRIVER_H_ */
