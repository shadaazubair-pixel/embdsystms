/*
 * STM32f401xx.h
 *
 *  Created on: Jan 20, 2026
 *      Author: user
 */

#ifndef INC_STM32F401XX_H_
#include<stdio.h>
#include<stdint.h>

#define INC_STM32F401XX_H_

#define __vo            volatile


/* memory base addresses*/
#define FLASH_BASEADDR                       0x08000000U // all addresses from reference manual
#define ROM_BASEADDR                      	 0x1FFF0000U
#define SRAM1_BASEADDR                       0x20000000U





/*peripheral BUS base address*/
#define APB1_PERIBASEADDR                    0x40000000U
#define APB2_PERIBASEADDR                    0x40010000U
#define AHB1_PERIBASEADDR                    0x40020000U
#define AHB2_PERIBASEADDR                    0x50000000U







/*peripherals in AHB1 BUS*/
#define GPIOA_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X0000)
#define GPIOB_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X0400)
#define GPIOC_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X0800)
#define GPIOD_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X0C00)
#define GPIOE_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X1000)
#define GPIOH_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X1C00)
#define CRC_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X3000)
#define RCC_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X3800)
#define FLASH_INTER_REG_PERI_BASEADDR		(AHB1_PERIBASEADDR+0X3C00)
#define DMA1_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X6000)
#define DMA2_PERI_BASEADDR					(AHB1_PERIBASEADDR+0X6400)




/*peripherals in AHB2 bus*/
#define USB_OTG_FS_PERI_BASEADDR            (AHB2_PERIBASEADDR+0X0000)





/*peripherals in APB1*/
#define TIM2_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X0000)
#define TIM3_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X0400)
#define TIM4_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X0800)
#define TIM5_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X0C00)
#define RTC_BKP_REG_PERI_BASEADDR           (APB1_PERIBASEADDR+0X2800)
#define WWDG_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X2C00)
#define IWDG_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X3000)
#define I2S2ext_PERI_BASEADDR               (APB1_PERIBASEADDR+0X3400)
#define SPI2_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X3800)
#define SPI3_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X3C00)
#define I2S3ext_PERI_BASEADDR               (APB1_PERIBASEADDR+0X4000)
#define USART2_PERI_BASEADDR                (APB1_PERIBASEADDR+0X4400)
#define I2C1_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X5400)
#define I2C2_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X5800)
#define I2C3_PERI_BASEADDR                  (APB1_PERIBASEADDR+0X5C00)
#define PWR_PERI_BASEADDR                   (APB1_PERIBASEADDR+0X7000)





/*peripherals in APB2*/
#define TIM1_PERI_BASEADDR                  (APB2_PERIBASEADDR+0X0000)
#define USART1_PERI_BASEADDR                (APB2_PERIBASEADDR+0X1000)
#define USART6_PERI_BASEADDR                (APB2_PERIBASEADDR+0X1400)
#define ADC1_PERI_BASEADDR                  (APB2_PERIBASEADDR+0X2000)
#define SDIO_PERI_BASEADDR                  (APB2_PERIBASEADDR+0X2C00)
#define SPI1_PERI_BASEADDR                  (APB2_PERIBASEADDR+0X3000)
#define SPI4_PERI_BASEADDR                  (APB2_PERIBASEADDR+0X3400)
#define SYSCFG_PERI_BASEADDR                (APB2_PERIBASEADDR+0X3800)
#define EXTI_PERI_BASEADDR                  (APB2_PERIBASEADDR+0X3C00)
#define TIM9_PERI_BASEADDR                  (APB2_PERIBASEADDR+0X4000)
#define TIM10_PERI_BASEADDR                 (APB2_PERIBASEADDR+0X4400)
#define TIM11_PERI_BASEADDR                 (APB2_PERIBASEADDR+0X4800)

/*GPIO register definition*/
typedef struct{
	__vo uint32_t MODER;
	__vo uint32_t OTYPER;
	__vo uint32_t OSPEEDR;
	__vo uint32_t PUPDR;
	__vo uint32_t IDR;
	__vo uint32_t ODR;
	__vo uint32_t BSRR;
	__vo uint32_t LCKR;
	__vo uint32_t AFRL;
	__vo uint32_t AFRH;

}GPIO_RegDef_t;

/*RCC register definitions*/
typedef struct{
	__vo uint32_t CR;
	__vo uint32_t PLLCFGR;
	__vo uint32_t CFGR;
	__vo uint32_t CIR;
	__vo uint32_t AHB1RSTR;
	__vo uint32_t AHB2RSTR;
		 uint32_t RESERVED1;
		 uint32_t RESERVED2;
	__vo uint32_t APB1RSTR;
	__vo uint32_t APB2RSTR;
		 uint32_t RESERVED3;
		 uint32_t RESERVED4;
	__vo uint32_t AHB1ENR;
	__vo uint32_t AHB2ENR;
		 uint32_t RESERVED5;
		 uint32_t RESERVED6;
	__vo uint32_t APB1ENR;
	__vo uint32_t APB2ENR;
	 	 uint32_t RESERVED7;
	 	 uint32_t RESERVED8;
	__vo uint32_t AHB1LPENR;
	__vo uint32_t AHB2LPENR;
	     uint32_t RESERVED9;
		 uint32_t RESERVED10;
	__vo uint32_t APB1LPENR;
	__vo uint32_t APB2LPENR;
	  	 uint32_t RESERVED11;
	  	 uint32_t RESERVED12;
    __vo uint32_t BDCR;
    __vo uint32_t CSR;
		 uint32_t RESERVED13;
	 	 uint32_t RESERVED14;
	__vo uint32_t SSCGR;
	__vo uint32_t PLLI2SCFGR;



}RCC_RegDef_t;


#define GPIOA    (GPIO_RegDef_t *)(GPIOA_PERI_BASEADDR);
#define GPIOB    (GPIO_RegDef_t *)(GPIOB_PERI_BASEADDR);
#define GPIOC    (GPIO_RegDef_t *)(GPIOC_PERI_BASEADDR);
#define GPIOD    (GPIO_RegDef_t *)(GPIOD_PERI_BASEADDR);
#define GPIOE    (GPIO_RegDef_t *)(GPIOE_PERI_BASEADDR);
#define GPIOH    (GPIO_RegDef_t *)(GPIOH_PERI_BASEADDR);



#define RCC      (RCC_RegDef_t*)(RCC_PERI_BASEADDR);

/*clock enable and disable macros*/

#define GPIOA_PCLK_EN()   (RCC->AHB1ENR|=(1<<0));
#define GPIOB_PCLK_EN()   (RCC->AHB1ENR|=(1<<1));
#define GPIOC_PCLK_EN()   (RCC->AHB1ENR|=(1<<2));
#define GPIOD_PCLK_EN()   (RCC->AHB1ENR|=(1<<3));
#define GPIOE_PCLK_EN()   (RCC->AHB1ENR|=(1<<4));
#define GPIOH_PCLK_EN()   (RCC->AHB1ENR|=(1<<7));


#define GPIOA_PCLK_DI()   (RCC->AHB1ENR&=~(1<<0));
#define GPIOB_PCLK_DI()   (RCC->AHB1ENR&=~(1<<1));
#define GPIOC_PCLK_DI()   (RCC->AHB1ENR&=~(1<<2));
#define GPIOD_PCLK_DI()   (RCC->AHB1ENR&=~(1<<3));
#define GPIOE_PCLK_DI()   (RCC->AHB1ENR&=~(1<<4));
#define GPIOH_PCLK_DI()   (RCC->AHB1ENR&=~(1<<7));

#define ENABLE            1;
#define DISABLE           0;


#define GPIO_SET_PIN      1;
#define GPIO_CLEAR_PIN    0;

#define I2C1_PCLK_EN()    (RCC->APB1ENR|=(1<<21));
#define I2C2_PCLK_EN()    (RCC->APB1ENR|=(1<<22));
#define I2C3_PCLK_EN()    (RCC->APB1ENR|=(1<<23));


#define I2C1_PCLK_DI()    (RCC->APB1ENR&=~(1<<21));
#define I2C2_PCLK_DI()    (RCC->APB1ENR&=~(1<<22));
#define I2C3_PCLK_DI()    (RCC->APB1ENR&=~(1<<23));


#define SPI2_PCLK_EN()    (RCC->APB1ENR|=(1<<14));
#define SPI3_PCLK_EN()    (RCC->APB1ENR|=(1<<15));

#define SPI2_PCLK_DI()    (RCC->APB1ENR&=~(1<<14));
#define SPI3_PCLK_DI()    (RCC->APB1ENR&=~(1<<15));


#define SPI1_PCLK_EN()    (RCC->APB2ENR|=(1<<12));
#define SPI4_PCLK_EN()    (RCC->APB2ENR|=(1<<13));


#define SPI1_PCLK_DI()    (RCC->APB1ENR&=~(1<<12));
#define SPI4_PCLK_DI()    (RCC->APB1ENR&=~(1<<13));


/*I2C register definition*/
typedef struct{
	__vo uint32_t CR1;
	__vo uint32_t CR2;
	__vo uint32_t OAR1;
	__vo uint32_t OAR2;
	__vo uint32_t DR;
	__vo uint32_t SR1;
	__vo uint32_t SR21;
	__vo uint32_t CCR;
	__vo uint32_t TRISE;
	__vo uint32_t FLTR;


}I2C_RegDef_t;

#define I2C1  = (I2C_RegDef_t*)(I2C1_PERI_BASEADDR);
#define I2C2  = (I2C_RegDef_t*)(I2C2_PERI_BASEADDR);
#define I2C3  = (I2C_RegDef_t*)(I2C3_PERI_BASEADDR);



/*SPI register definition*/
typedef struct{
	__vo uint32_t CR1;
		 uint32_t reserved;
	__vo uint32_t SR;
	__vo uint32_t DR;
	__vo uint32_t CRCPR;
	__vo uint32_t RXCRCR;
	__vo uint32_t TXCRCR;
	__vo uint32_t I2SCFGR;
	__vo uint32_t I2SPR;



}SPI_RegDef_t;

#define SPI1  =  (SPI_RegDef*)(SPI1_PERI_BASEADDR);
#define SPI2  =  (SPI_RegDef*)(SPI2_PERI_BASEADDR);
#define SPI3  =  (SPI_RegDef*)(SPI3_PERI_BASEADDR);
#define SPI4  =  (SPI_RegDef*)(SPI4_PERI_BASEADDR);











#endif /* INC_STM32F401XX_H_*/
